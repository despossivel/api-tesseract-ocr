version: "2"
services:
  nginx:
    container_name: nginx-api
    build:
      context: .docker/nginx
      dockerfile: Dockerfile
    ports:
      - "80:80"
    networks:
      - pinpper
    restart: always
  web:
    container_name: api.pinpper.com
    build:
      context: .
      dockerfile: Dockerfile.prod
    # container_name: api.pinpper.com
    #command:   pm2-runtime process.json
    volumes:
      - .:/usr/api.pinpper.com
      - ./node_modules:/usr/api.pinpper.com/node_modules
      - ./public/uploads:/usr/api.pinpper.com/public/uploads
    # ports:
    #   - "5000:5000"
    networks:
      - pinpper
    restart: always

networks:
  pinpper:
    driver: bridge
